<form [formGroup]="myForm"
      class="flex flex-col gap-2 px-5 py-3 max-w-[min(95%,700px)] min-w-[340px] border-black border rounded ">
  <h2 class="text-xl font-medium">Información Personal</h2>
  <div class="flex flex-col sm:flex-row gap-3">
    <ng-container
      *ngFor="let field of [{controlName:'name', name: 'Nombre', placeholder: 'John Doe', type: 'text'}, {controlName:'email', name: 'Email', placeholder: 'jhondoe12@email.com', type: 'email'}]">
      <div class="flex flex-col w-full sm:w-1/2 gap-1">
        <label class="required-field">{{field.name}}</label>
        <input
          [ngClass]="{'border-red-500 focus:outline-none focus:border-2': isControlInvalidAndTouched(field.controlName)}"
          class="px-2 py-1 rounded focus:outline-none w-full border outline-0"
          [placeholder]="field.placeholder" required [type]="field.type"
          [formControlName]="field.controlName"/>

        <app-error-message *ngIf="myForm.get(field.controlName) !== null" [errors]="['required', 'minlength', 'email']"
                           [control]="myForm.get(field.controlName)!"/>
      </div>
    </ng-container>
  </div>
  <h2 class="text-xl font-medium mt-5">Información de envío</h2>
  <div class="flex flex-col sm:flex-row gap-3 w-full">
    <ng-container *ngFor="let field of [
      {name: 'Altura', unity: 'cm', placeholder: '10', controlName: 'height'},
      {name: 'Anchura', unity: 'cm', placeholder: '23.5', controlName: 'width'},
      {name: 'Peso', unity: 'lb', placeholder: '120', controlName: 'weight'}
      ]">
      <div class="w-full sm:w-1/3 flex-col gap-1">
        <label class="required-field"><span>{{field.name}}</span> en <strong>{{field.unity}}</strong></label>
        <input class="px-2 py-1 rounded w-full border" [placeholder]="field.placeholder" type="number"
               [ngClass]="{'border-red-500 focus:outline-none focus:border-2': isControlInvalidAndTouched(field.controlName)}"
               required [formControlName]="field.controlName"/>
        <app-error-message *ngIf="myForm.get(field.controlName) !== null" [errors]="['required', 'min']"
                           [control]="myForm.get(field.controlName)!"/>
      </div>
    </ng-container>
  </div>
  <h2 class="text-xl font-medium mt-5">Información de destino</h2>
  <div class="flex flex-col sm:flex-row gap-3">
    <div class="w-full sm:w-1/2">
      <label class="required-field">Region</label>
      <ng-select [items]="regions" (change)="filterCountries()" bindLabel="name"
                 [ngClass]="{'border-red-500 focus:outline-none focus:border-2': isControlInvalidAndTouched('region')}"
                 placeholder="Selecciona una region"
                 formControlName="region"></ng-select>
      <app-error-message *ngIf="myForm.get('region') !== null" [errors]="['required']"
                         [control]="myForm.get('region')!"/>
    </div>
    <div class="w-full sm:w-1/2">
      <label class="required-field">Pais</label>
      <ng-select [items]="countries" bindLabel="name"
                 [ngClass]="{'border-red-500 focus:outline-none focus:border-2': isControlInvalidAndTouched('country_destination')}"
                 formControlName="country_destination"></ng-select>
      <app-error-message *ngIf="myForm.get('region')?.value && myForm.get('country_destination') !== null"
                         [errors]="['required']"
                         [control]="myForm.get('country_destination')!"/>
    </div>
  </div>
  <button class="mt-5 text-center bg-black text-amber-50 w-full px-2 py-1 hover:bg-[rgba(0,0,0,0.8)]">Submit</button>
</form>
